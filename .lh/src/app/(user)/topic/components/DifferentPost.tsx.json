{
    "sourceFile": "src/app/(user)/topic/components/DifferentPost.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1759734123860,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1760079154989,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,89 +1,71 @@\n \"use client\";\r\n \r\n import { ChevronLeft, ChevronRight } from \"lucide-react\";\r\n-import Image, { StaticImageData } from \"next/image\";\r\n+import Image from \"next/image\";\r\n import Link from \"next/link\";\r\n import { useState } from \"react\";\r\n-import { useLanguage } from \"@/contexts/LanguageContext\";\r\n+import { Post } from \"@/types/topic\";\r\n \r\n-type Post = {\r\n-  id: number;\r\n-  title: string;\r\n-  excerpt: string;\r\n-  type: \"image\" | \"video\";\r\n-  image?: StaticImageData | string;\r\n-  videoUrl?: string;\r\n-  author: string;\r\n-};\r\n-\r\n export default function DifferentPost({\r\n   posts,\r\n   currentPostId,\r\n   slug,\r\n }: {\r\n   posts: Post[];\r\n-  currentPostId: number;\r\n+  currentPostId: string;\r\n   slug: string;\r\n }) {\r\n-  const { t } = useLanguage();\r\n-  const filtered = posts.filter((p) => p.id !== currentPostId);\r\n-\r\n+  const filtered = posts.filter((p) => p._id !== currentPostId);\r\n   const [startIndex, setStartIndex] = useState(0);\r\n \r\n-  // Responsive: mobile=1, tablet=2, desktop=3\r\n   const getVisibleCount = () => {\r\n     if (typeof window !== \"undefined\") {\r\n-      if (window.innerWidth < 640) return 1; // mobile\r\n-      if (window.innerWidth < 1024) return 2; // tablet\r\n+      if (window.innerWidth < 640) return 1;\r\n+      if (window.innerWidth < 1024) return 2;\r\n     }\r\n-    return 3; // desktop\r\n+    return 3;\r\n   };\r\n \r\n   const VISIBLE_COUNT = getVisibleCount();\r\n-\r\n-  if (filtered.length === 0) return null;\r\n-\r\n   const visiblePosts = filtered.slice(startIndex, startIndex + VISIBLE_COUNT);\r\n \r\n-  const handlePrev = () => {\r\n-    if (startIndex > 0) setStartIndex((prev) => prev - 1);\r\n-  };\r\n+  const handlePrev = () => startIndex > 0 && setStartIndex((p) => p - 1);\r\n+  const handleNext = () =>\r\n+    startIndex + VISIBLE_COUNT < filtered.length && setStartIndex((p) => p + 1);\r\n \r\n-  const handleNext = () => {\r\n-    if (startIndex + VISIBLE_COUNT < filtered.length) {\r\n-      setStartIndex((prev) => prev + 1);\r\n-    }\r\n-  };\r\n+  if (filtered.length === 0) return null;\r\n \r\n   return (\r\n     <div className=\"mt-12\">\r\n-      {/* Header */}\r\n       <div className=\"flex items-center justify-between mb-6\">\r\n-        <h2 className=\"text-xl sm:text-2xl font-bold\">{t(\"topic.otherPosts\")}</h2>\r\n+        <h2 className=\"text-xl sm:text-2xl font-bold\">BÃ i viáº¿t khÃ¡c</h2>\r\n         <Link\r\n           href={`/topic/${slug}`}\r\n           className=\"text-blue-600 hover:underline text-sm sm:text-base\"\r\n         >\r\n-          {t(\"topic.viewAll\")}\r\n+          Xem táº¥t cáº£\r\n         </Link>\r\n       </div>\r\n \r\n-      {/* Slider */}\r\n       <div className=\"relative\">\r\n         {/* Prev */}\r\n         <ChevronLeft\r\n           onClick={handlePrev}\r\n           className={`absolute -left-4 sm:-left-8 top-1/2 -translate-y-1/2 h-8 w-8 sm:h-10 sm:w-10 rounded-full p-2 cursor-pointer shadow-md\r\n-          ${startIndex === 0 ? \"opacity-40 cursor-not-allowed\" : \"bg-green-300 text-gray-700 hover:bg-gray-100\"}`}\r\n+            ${\r\n+              startIndex === 0\r\n+                ? \"opacity-40 cursor-not-allowed\"\r\n+                : \"bg-green-300 text-gray-700 hover:bg-gray-100\"\r\n+            }`}\r\n         />\r\n \r\n         {/* Posts */}\r\n-        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 overflow-hidden\">\r\n+        <div className=\"w-[90%] mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 overflow-hidden\">\r\n           {visiblePosts.map((post) => (\r\n             <Link\r\n-              key={post.id}\r\n-              href={`/topic/${slug}/post/${post.id}`}\r\n+              key={post._id}\r\n+              href={`/topic/${slug}/post/${post._id}`}\r\n               className=\"bg-white shadow-md rounded-lg flex flex-col hover:shadow-lg transition overflow-hidden\"\r\n             >\r\n               <div className=\"relative w-full h-40 sm:h-48\">\r\n                 {post.type === \"image\" && post.image && (\r\n@@ -99,13 +81,13 @@\n                     ðŸŽ¬ Video\r\n                   </div>\r\n                 )}\r\n               </div>\r\n-              <div className=\"p-3 sm:p-4\">\r\n-                <h3 className=\"font-semibold text-base sm:text-lg line-clamp-1\">\r\n+              <div className=\"p-3 sm:p-4 flex flex-col flex-grow\">\r\n+                <h3 className=\"font-semibold text-base sm:text-lg line-clamp-1 min-h-[1.5rem]\">\r\n                   {post.title}\r\n                 </h3>\r\n-                <p className=\"text-gray-600 text-sm line-clamp-2\">\r\n+                <p className=\"text-gray-600 text-sm line-clamp-2 min-h-[3rem]\">\r\n                   {post.excerpt}\r\n                 </p>\r\n               </div>\r\n             </Link>\r\n@@ -115,12 +97,13 @@\n         {/* Next */}\r\n         <ChevronRight\r\n           onClick={handleNext}\r\n           className={`absolute -right-4 sm:-right-8 top-1/2 -translate-y-1/2 h-8 w-8 sm:h-10 sm:w-10 rounded-full p-2 cursor-pointer shadow-md\r\n-          ${startIndex + VISIBLE_COUNT >= filtered.length\r\n-              ? \"opacity-40 cursor-not-allowed\"\r\n-              : \"bg-green-300 text-gray-700 hover:bg-gray-100\"\r\n-          }`}\r\n+            ${\r\n+              startIndex + VISIBLE_COUNT >= filtered.length\r\n+                ? \"opacity-40 cursor-not-allowed\"\r\n+                : \"bg-green-300 text-gray-700 hover:bg-gray-100\"\r\n+            }`}\r\n         />\r\n       </div>\r\n     </div>\r\n   );\r\n"
                }
            ],
            "date": 1759734123860,
            "name": "Commit-0",
            "content": "\"use client\";\r\n\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport Image, { StaticImageData } from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\nimport { useLanguage } from \"@/contexts/LanguageContext\";\r\n\r\ntype Post = {\r\n  id: number;\r\n  title: string;\r\n  excerpt: string;\r\n  type: \"image\" | \"video\";\r\n  image?: StaticImageData | string;\r\n  videoUrl?: string;\r\n  author: string;\r\n};\r\n\r\nexport default function DifferentPost({\r\n  posts,\r\n  currentPostId,\r\n  slug,\r\n}: {\r\n  posts: Post[];\r\n  currentPostId: number;\r\n  slug: string;\r\n}) {\r\n  const { t } = useLanguage();\r\n  const filtered = posts.filter((p) => p.id !== currentPostId);\r\n\r\n  const [startIndex, setStartIndex] = useState(0);\r\n\r\n  // Responsive: mobile=1, tablet=2, desktop=3\r\n  const getVisibleCount = () => {\r\n    if (typeof window !== \"undefined\") {\r\n      if (window.innerWidth < 640) return 1; // mobile\r\n      if (window.innerWidth < 1024) return 2; // tablet\r\n    }\r\n    return 3; // desktop\r\n  };\r\n\r\n  const VISIBLE_COUNT = getVisibleCount();\r\n\r\n  if (filtered.length === 0) return null;\r\n\r\n  const visiblePosts = filtered.slice(startIndex, startIndex + VISIBLE_COUNT);\r\n\r\n  const handlePrev = () => {\r\n    if (startIndex > 0) setStartIndex((prev) => prev - 1);\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (startIndex + VISIBLE_COUNT < filtered.length) {\r\n      setStartIndex((prev) => prev + 1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-12\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-xl sm:text-2xl font-bold\">{t(\"topic.otherPosts\")}</h2>\r\n        <Link\r\n          href={`/topic/${slug}`}\r\n          className=\"text-blue-600 hover:underline text-sm sm:text-base\"\r\n        >\r\n          {t(\"topic.viewAll\")}\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Slider */}\r\n      <div className=\"relative\">\r\n        {/* Prev */}\r\n        <ChevronLeft\r\n          onClick={handlePrev}\r\n          className={`absolute -left-4 sm:-left-8 top-1/2 -translate-y-1/2 h-8 w-8 sm:h-10 sm:w-10 rounded-full p-2 cursor-pointer shadow-md\r\n          ${startIndex === 0 ? \"opacity-40 cursor-not-allowed\" : \"bg-green-300 text-gray-700 hover:bg-gray-100\"}`}\r\n        />\r\n\r\n        {/* Posts */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 overflow-hidden\">\r\n          {visiblePosts.map((post) => (\r\n            <Link\r\n              key={post.id}\r\n              href={`/topic/${slug}/post/${post.id}`}\r\n              className=\"bg-white shadow-md rounded-lg flex flex-col hover:shadow-lg transition overflow-hidden\"\r\n            >\r\n              <div className=\"relative w-full h-40 sm:h-48\">\r\n                {post.type === \"image\" && post.image && (\r\n                  <Image\r\n                    src={post.image}\r\n                    alt={post.title}\r\n                    fill\r\n                    className=\"object-cover\"\r\n                  />\r\n                )}\r\n                {post.type === \"video\" && (\r\n                  <div className=\"w-full h-full flex items-center justify-center bg-gray-200 text-gray-600\">\r\n                    ðŸŽ¬ Video\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"p-3 sm:p-4\">\r\n                <h3 className=\"font-semibold text-base sm:text-lg line-clamp-1\">\r\n                  {post.title}\r\n                </h3>\r\n                <p className=\"text-gray-600 text-sm line-clamp-2\">\r\n                  {post.excerpt}\r\n                </p>\r\n              </div>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Next */}\r\n        <ChevronRight\r\n          onClick={handleNext}\r\n          className={`absolute -right-4 sm:-right-8 top-1/2 -translate-y-1/2 h-8 w-8 sm:h-10 sm:w-10 rounded-full p-2 cursor-pointer shadow-md\r\n          ${startIndex + VISIBLE_COUNT >= filtered.length\r\n              ? \"opacity-40 cursor-not-allowed\"\r\n              : \"bg-green-300 text-gray-700 hover:bg-gray-100\"\r\n          }`}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}